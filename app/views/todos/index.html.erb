<div class="container">
  <h1 class="text-center">To Do List</h1>
  
  <div class="panel panel-info">

    <div class="panel-heading">
      <h3 class="panel-title">事項清單</h3>
    </div>
    
    <div class="panel-body">
      <form>
        <label>新增事項</label>
        <div class="input-group">
          <input type="text_field" id="txt-new" class="form-control" />
          <div class="input-group-addon">
            <button id="but-create" class="my-btn my-btn-transparent">新增</button>
          </div>
        </div>
      </form>
    </div>

    <table class="my-table table table-hover">
      <thead/>
      <tbody id="todolist">
        <% @todos.each do |todo| %>
          <tr id="<%= todo.id %>">
            <%= render "todo", todo: todo %>
          </tr>
        <% end %>
      </tbody>
      <tfoot/>
    </table>
    
  </div>
  
</div>
<script>
$("#but-create").on("click", function(event){
  $.ajax({
    url: 'todos/',
    method: 'POST',
    dataType: 'json',
    data: {
      todo: {
        title: $("#txt-todo").val();
      }
    },
    success: function(data){
      
    }
  });
});

$("#todolist").on("click", ".delete-todo", function(event){
  var id = event.target.parentNode.parentNode.id;
  console.log(id);
  $.ajax({
    url: 'todos/' + id,
    method: 'DELETE',
    dataType: 'json',
    success: function(data){
      $("#" + data["id"]).remove();
    }
  });
});
</script>